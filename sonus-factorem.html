<!DOCTYPE html>

<html lang="en">
    <head>
        <title>sonus factorem</title>
        <meta charset=utf-8>
    </head>
    <body>
        <h1>
            sonus factorem
        </h1>
        <h2>
            The web-based semitone instument
        </h2>
        <p>
            Welcome to sonus factorem, a place where you can play music using just your keyboard!
        </p>
        <p>
            It uses a custom 20 note scale (with half-steps), the first octive being 20hz though 40hz,
            the second 40hz though 80hz, the third being 8hz though 160 hz and so on.
        </p>
        <h2>Your Stats:</h2>
        <p id="stats">
        </p>
        
        <script>
            var key = {
                a:65,
                b:66,
                c:67,
                d:68,
                e:69,
                f:70,
                g:71,
                h:72,
                i:73, 
                j:74,
                k:75,
                l:76,
                m:77,
                n:78,
                o:79,
                p:80,
                q:81,
                r:82,
                s:83,
                t:84,
                shift:16,
                one:48,
                two:49,
                three:50,
                four:51,
                five:52,
                six:53,
                seven:54,
                eight:55,
                nine:56,
            }
            
            var octave = 1;
            var halfStep = false;
            var aud = new AudioContext();
            
            function playNote(note)
            {
                note = note * 2;
                if(halfStep == true) note += 1;
                var auda = aud.createOscillator();
                auda.type = "triangle";
                auda.frequency.value = 10 * Math.pow(2, octave) + ((Math.pow(2, octave) / 40) * note);
                auda.start(0);
                auda.connect(aud.destination)
            }
            
            window.onkeydown = function(e)
            {
                if (!e) e = window.event;
                if (e.keyCode == key.one) octave = 1;
                if (e.keyCode == key.two) octave = 2;
                if (e.keyCode == key.three) octave = 3;
                if (e.keyCode == key.four) octave = 4;
                if (e.keyCode == key.five) octave = 5;
                if (e.keyCode == key.six) octave = 6;
                if (e.keyCode == key.seven) octave = 7;
                if (e.keyCode == key.eight) octave = 8;
                if (e.keyCode == key.nine) octave = 9;
                
                if (e.keyCode == key.shift) halfStep = true;
                
                if(e.keyCode == key.a) playNote(0);
            }
        </script>
    </body>
</html>
